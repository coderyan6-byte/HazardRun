<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>One Life</title>
<style>
  :root { --bg: #0f1220; --fg: #e9ecf1; --accent: #8b5cf6; --muted:#9aa3b2; }
  body { margin:0; font-family:sans-serif; background: radial-gradient(1000px 600px at 50% -200px, #1b2142 0%, var(--bg) 60%); color: var(--fg); display:grid; place-items:center; min-height:100vh; }
  .wrap { width: min(520px, 94vw); }
  .card { background: #151935aa; backdrop-filter: blur(8px); border: 1px solid #232949; border-radius: 18px; padding: 16px; }
  canvas { width: 100%; height: auto; background: linear-gradient(#0b0f1f, #0e142b); border-radius: 14px; display:block; border:1px solid #20264a; }
  .hud { display:flex; justify-content:space-between; margin: 10px 2px; }
  .btn { background: var(--accent); color:white; padding:10px 14px; border-radius:12px; font-weight:700; cursor:pointer; border:none; }
  .btn[disabled]{ opacity:.5; cursor:not-allowed; }
  .pill { padding:6px 10px; border-radius:999px; background:#1f2446; border:1px solid #2a3160; }
  .dead-overlay { position: absolute; inset: 0; display: grid; place-items:center; border-radius:14px; background: #0b0f1fcc; opacity:0; pointer-events:none; transition: opacity .35s ease; }
  .dead-overlay.show { opacity:1; pointer-events:auto; }
  .dead-card { text-align:center; padding:22px; border-radius:16px; border:1px solid #2b315c; background:#121632ee; }
  .controls { display:flex; gap:10px; justify-content:center; margin-top:10px; }
  .ctrl { width:78px; height:48px; border-radius:12px; border:1px solid #2a3160; background:#1b2146; color:#e8eaf4; font-weight:800; }
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>Hazard Run</h1>
    <p>Survive as long as you can.</p>
    <div class="hud">
      <span class="pill">Score: <span id="score">0</span></span>
      <button id="startBtn" class="btn">Start</button>
    </div>
    <div style="position:relative">
      <canvas id="game" width="420" height="620"></canvas>
      <div id="deathOverlay" class="dead-overlay">
        <div class="dead-card">
          <h2 id="deadTitle">Game Over</h2>
          <p id="deadMsg">You died.</p>
          <button class="btn" disabled>Locked</button>
        </div>
      </div>
    </div>
    <div class="controls">
      <button class="ctrl" id="left">◀︎</button>
      <button class="ctrl" id="right">▶︎</button>
    </div>
    <p style="color:#8e97b2; font-size: 12px;">Move with ◀︎ ▶︎ or A/D. You have exactly one life.</p>
  </div>
</div>

<script>
const DEATH_KEY = "one_life_perma_dead_v2";
function isPermaDead(){ try{ return localStorage.getItem(DEATH_KEY)==="1"; }catch{} return document.cookie.split("; ").some(c=>c.startsWith(DEATH_KEY+"=1")); }
function setPermaDead(){ try{ localStorage.setItem(DEATH_KEY, "1"); }catch{} document.cookie = `${DEATH_KEY}=1; expires=Fri, 31 Dec 2099 23:59:59 GMT; path=/`; }

const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const scoreEl = document.getElementById('score');
const startBtn = document.getElementById('startBtn');
const overlay = document.getElementById('deathOverlay');
const leftBtn = document.getElementById('left');
const rightBtn = document.getElementById('right');
const deadTitle = document.getElementById('deadTitle');
const deadMsg = document.getElementById('deadMsg');

let rafId = null, running = false, score = 0, t0 = 0, scoreTimer = 0;
const playerImg = new Image(); playerImg.src = "player.png";
const zombieImg = new Image(); zombieImg.src = "zombie.png";
const player = { x: canvas.width/2 - 18, y: canvas.height - 60, w: 36, h: 36, vx: 0, speed: 5 };
const hazards = [];

function reset(){ score = 0; scoreEl.textContent = '0'; scoreTimer = 0; player.x = canvas.width/2 - player.w/2; player.vx = 0; hazards.length = 0; t0 = performance.now(); }
function spawnHazard(){ const size = 36; const x = Math.random() * (canvas.width - size); const y = -size; const vy = 2 + Math.random()* (2 + score*0.02); hazards.push({x,y,w:size,h:size,vy}); }
function rectsOverlap(a,b){ return a.x < b.x + b.w && a.x+a.w > b.x && a.y < b.y + b.h && a.y+a.h > b.y; }
function draw(){ ctx.clearRect(0,0,canvas.width,canvas.height); ctx.drawImage(playerImg, player.x, player.y, player.w, player.h); hazards.forEach(z => ctx.drawImage(zombieImg, z.x, z.y, z.w, z.h)); }
function update(dt){ player.x += player.vx * player.speed; if(player.x < 0) player.x = 0; if(player.x + player.w > canvas.width) player.x = canvas.width - player.w;
  if(Math.random() < 0.05 + Math.min(0.4, score*0.002)) spawnHazard();
  for(let i=hazards.length-1;i>=0;i--){ const h = hazards[i]; h.y += h.vy; if(h.y > canvas.height+50) hazards.splice(i,1); if(rectsOverlap(player, h)){ die(); return; } }
    scoreTimer += dt; if (scoreTimer >= 5000) {
        score++; scoreTimer = 0; scoreEl.textContent = score;
        if (score >= 30) {
            const rewards = [

                "https://coderyan6-byte.github.io/HazardRun/mario.mcworld",
                "https://coderyan6-byte.github.io/HazardRun/TormentDifficulty.mcpack",
                "https://coderyan6-byte.github.io/HazardRun/Matrix.mcpack"
              
            ];
            const randomReward = rewards[Math.floor(Math.random() * rewards.length)];
            window.location.href = randomReward;
        }
    }

}
function loop(now){ const dt = now - t0; t0 = now; update(dt); draw(); if(running) rafId = requestAnimationFrame(loop); }
function start(){ if(isPermaDead()) { lockUI(); return; } if(running) return; running = true; reset(); startBtn.textContent = 'Running…'; startBtn.disabled = true; t0 = performance.now(); rafId = requestAnimationFrame(loop); }
function stop(){ running = false; if(rafId) cancelAnimationFrame(rafId); startBtn.textContent = 'Start'; startBtn.disabled = false; }
function die(){ stop(); setPermaDead(); lockUI(true); }
function lockUI(fromDeath=false){ overlay.classList.add('show'); startBtn.disabled = true; if(fromDeath){ deadTitle.textContent = 'Permanent Game Over'; deadMsg.textContent = 'You have met you demise.'; } else { deadTitle.textContent = 'Locked'; deadMsg.textContent = 'This game was previously ended.'; } }

const keys = new Set();
function keydown(e){ if(e.repeat) return; if(e.key==='ArrowLeft'||e.key==='a'||e.key==='A') keys.add('L'); if(e.key==='ArrowRight'||e.key==='d'||e.key==='D') keys.add('R'); updateVelocity(); if(e.key===' '||e.key==='Enter') start(); }
function keyup(e){ if(e.key==='ArrowLeft'||e.key==='a'||e.key==='A') keys.delete('L'); if(e.key==='ArrowRight'||e.key==='d'||e.key==='D') keys.delete('R'); updateVelocity(); }
function updateVelocity(){ if(keys.has('L') && !keys.has('R')) player.vx = -1; else if(keys.has('R') && !keys.has('L')) player.vx = 1; else player.vx = 0; }

leftBtn.addEventListener('touchstart', e=>{ e.preventDefault(); keys.add('L'); updateVelocity(); });
rightBtn.addEventListener('touchstart', e=>{ e.preventDefault(); keys.add('R'); updateVelocity(); });
['touchend','touchcancel'].forEach(type=>{ leftBtn.addEventListener(type, e=>{ keys.delete('L'); updateVelocity(); }); rightBtn.addEventListener(type, e=>{ keys.delete('R'); updateVelocity(); }); });

startBtn.addEventListener('click', start);
window.addEventListener('keydown', keydown);
window.addEventListener('keyup', keyup);
    if (isPermaDead()) {
        window.location.href = "https://coderyan6-byte.github.io/ModMaker/";
        lockUI();
    }
draw();
</script>
</body>
</html>







